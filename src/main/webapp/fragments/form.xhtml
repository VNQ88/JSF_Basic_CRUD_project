<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:cmp="http://xmlns.jcp.org/jsf/composite/components"
	xmlns:app="http://andrew.org/jsf/app">

	<h:panelGroup rendered="#{employeeBean.formVisible}">
		<h:form class="employee-form">
			<h3>#{employeeBean.editMode ? 'Update Employee' : 'Add
				Employee'}</h3>

			<h:panelGroup rendered="#{employeeBean.editMode}">
				<div class="form-field">
					<label>Employee ID:</label>
					<h:outputText value="#{employeeBean.currentEmployee.employeeCode}"
						style="font-weight: bold; color: #333; margin-left: 10px;" />
				</div>
			</h:panelGroup>

			<div class="form-field">
				<label>Full Name:</label>
				<app:customInput id="employeeName"
					value="#{employeeBean.currentEmployee.employeeName}" type="NAME"
					required="true" requiredMessage="Please enter full name.">
					<f:ajax event="keyup" execute="@this" render="nameMsg" delay="500" />
					<f:ajax event="blur" execute="@this" render="@this nameMsg" />

				</app:customInput>
				<h:message id="nameMsg" for="employeeName"
					styleClass="error-message" />
			</div>

			<div class="form-field">
				<cmp:inputField label="Date of Birth"
					value="#{employeeBean.currentEmployee.dateOfBirth}" required="true"
					requiredMessage="Please enter the employee's date of birth."
					validator="#{employeeBean.dobRangeValidator}">

					<f:converter for="input" converterId="multiDateConverter" />
					<f:ajax event="blur" execute="@this" render="@this msg" />
				</cmp:inputField>
			</div>
			<ui:remove>

				<div class="form-field">
					<cmp:inputField label="Full Name"
						value="#{employeeBean.currentEmployee.employeeName}"
						required="true"
						requiredMessage="Please enter the employee's full name."
						validator="#{employeeBean.fullNameValidator}">
						<f:converter for="input" converterId="titleCaseNameConverter" />
						<f:ajax event="keyup" execute="@this" render="msg" delay="500" />
						<f:ajax event="blur" execute="@this" render="@this msg" />
					</cmp:inputField>
				</div>

				<div class="form-field">
					<label>Date of Birth:</label>
					<app:customInput id="dateOfBirth"
						value="#{employeeBean.currentEmployee.dateOfBirth}" type="DOB"
						required="true"
						requiredMessage="Please enter the employee's date of birth.">
						<f:ajax event="blur" execute="@this" render="@this dobMsg" />

					</app:customInput>
					<h:message id="dobMsg" for="dateOfBirth" styleClass="error-message" />
				</div>
			</ui:remove>

			<div style="text-align: center; margin-top: 20px;">
				<h:commandButton value="Save"
					action="#{employeeBean.saveEmployee()}">
					<f:ajax execute="@this" render=":employeeForm:content">
					</f:ajax>
				</h:commandButton>

				<h:commandButton value="Cancel" action="#{employeeBean.cancel}"
					immediate="true">
					<f:ajax execute="@this" render=":employeeForm:content"
						resetValues="true">
					</f:ajax>
				</h:commandButton>
			</div>
		</h:form>
	</h:panelGroup>
</ui:composition>
