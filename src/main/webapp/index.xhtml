<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"> <h:head>
    <title>Quản lý nhân viên</title>
    <style>
        .table-style { border-collapse: collapse; width: 80%; margin: 20px auto; }
        .table-header { background-color: #4CAF50; color: white; padding: 10px; }
        .table-row { text-align: center; border-bottom: 1px solid #ddd; padding: 8px; }
        .form-container { width: 50%; margin: 20px auto; padding: 20px; border: 1px solid #ddd; border-radius: 5px;}
        .form-group { margin-bottom: 15px; }
        .form-group label { display: inline-block; width: 120px; font-weight: bold;}
    </style>
</h:head>

<h:body>
    <h:form id="mainForm">
        <h2 style="text-align:center">Quản lý nhân viên</h2>

        <h:panelGroup rendered="#{!employeeBean.formVisible}">
            <div style="text-align: center; margin-bottom: 10px;">
                <h:commandButton value="Thêm nhân viên mới" action="#{employeeBean.showAddForm}"/>
            </div>

            <h:dataTable value="#{employeeBean.employees}" var="emp"
                         styleClass="table-style"
                         headerClass="table-header"
                         rowClasses="table-row">
                
                <h:column><f:facet name="header">Mã NV</f:facet>#{emp.employeeCode}</h:column>
                <h:column><f:facet name="header">Họ tên</f:facet>#{emp.employeeName}</h:column>
                
                <h:column><f:facet name="header">Tuổi</f:facet>#{emp.employeeAge}</h:column>
                
                <h:column>
                    <f:facet name="header">Ngày Sinh</f:facet>
                    <h:outputText value="#{emp.dateOfBirth}">
                        <f:convertDateTime pattern="dd/MM/yyyy" />
                    </h:outputText>
                </h:column>

                <h:column>
                    <f:facet name="header">Thao tác</f:facet>
                    <h:commandButton value="Sửa" action="#{employeeBean.showEditForm(emp)}"/>
                    <h:commandButton value="Xóa" action="#{employeeBean.delete(emp)}"
                                     onclick="return confirm('Xóa nhé?');"/>
                </h:column>
            </h:dataTable>
        </h:panelGroup>

        <h:panelGroup rendered="#{employeeBean.formVisible}">
            <div class="form-container">
                <h3>#{employeeBean.editMode ? 'Cập nhật' : 'Thêm mới'}</h3>
                
                <div class="form-group">
                    <label>Mã NV:</label>
                    <h:inputText value="#{employeeBean.currentEmployee.employeeCode}" 
                                 readonly="#{employeeBean.editMode}" required="true"/>
                </div>

                <div class="form-group">
                    <label>Họ tên:</label>
                    <h:inputText value="#{employeeBean.currentEmployee.employeeName}" required="true"/>
                    
                </div>

                <div class="form-group">
                    <label>Ngày sinh:</label>
                    
                    <p:datePicker value="#{employeeBean.currentEmployee.dateOfBirth}"
                                  pattern="dd/MM/yyyy"
                                  showIcon="true"
                                  monthNavigator="true"
                                  yearNavigator="true"
                                  yearRange="1900:2025"
                                  required="true"
                                  requiredMessage="Vui lòng chọn ngày sinh"
                                  />
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <h:commandButton value="Lưu" action="#{employeeBean.save}"/>
                    <h:commandButton value="Hủy" action="#{employeeBean.cancel}" immediate="true"/>
                </div>
            </div>
        </h:panelGroup>

    </h:form>
</h:body>
</html>